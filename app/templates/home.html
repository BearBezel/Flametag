{% extends "base.html" %}
{% block content %}

<div class="hero">

  <!-- Logo -->
  <img
    src="{{ url_for('static', filename='img/logo.png') }}"
    alt="FlameTag"
    class="hero-logo"
  />

  <!-- Search -->
  <form id="codeForm" class="hero-search" autocomplete="off">
    <input
      id="codeInput"
      type="text"
      placeholder="Enter code (e.g. R329QRY8)"
      maxlength="32"
      required
    />

    <div class="hero-actions">
      <button class="btn primary" type="submit">View</button>
      <button class="btn secondary" type="button" id="scanBtn">Scan QR</button>
    </div>
  </form>

  <p class="example">
    Try an example: <span class="code">R329QRY8</span>
  </p>
</div>

<!-- How it works -->
<section class="how">
  <h2>How it works</h2>

  <div class="how-grid">
    <div class="how-card">
      <div class="icon">ðŸ”–</div>
      <p>FlameTag QR is added to the product</p>
    </div>

    <div class="how-card">
      <div class="icon">ðŸ“·</div>
      <p>Scan to see the public message</p>
    </div>

    <div class="how-card">
      <div class="icon">ðŸ”’</div>
      <p>Unlock the private message with a PIN</p>
    </div>
  </div>
</section>

<script>
  // View code
  document.getElementById("codeForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const raw = document.getElementById("codeInput").value || "";
    const token = raw.trim().replace(/\s+/g, "").toUpperCase();
    if (!token) return;
    window.location.href = "/l/" + token;
  });

  // Scan QR (mobile browsers only)
  const scanBtn = document.getElementById("scanBtn");
  if (scanBtn) {
    scanBtn.addEventListener("click", () => {
      alert("Use your phone camera to scan the FlameTag QR.");
    });
  }
</script>

{% endblock %}
