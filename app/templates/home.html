{% extends "base.html" %}
{% block content %}

  <div class="hero">
    <div class="hero-logo">
      <img src="{{ url_for('static', filename='img/logo.png') }}" alt="FlameTag">
    </div>

    <div class="hero-search">
      <form id="codeForm" class="code-form" autocomplete="off">
        <input
          id="codeInput"
          class="code-input"
          type="text"
          placeholder="Enter FlameTag code"
          maxlength="32"
          required
        />

        <div class="btn-row">
          <button class="btn" type="submit">View</button>
          <button class="btn secondary" type="button" id="scanBtn">Scan QR</button>
        </div>
      </form>

      <div class="hint">
        Try an example: <span class="code">R329QRY8</span>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="card">
      <div class="badge">How it works</div>
      <p class="p" style="margin-top:10px;">
        FlameTag is built directly into the product by the brand.<br><br>
        1) Each product includes a unique FlameTag QR<br>
        2) Scan to view a public message<br>
        3) Owners can lock a private message with a PIN
      </p>
    </div>
  </div>

  <script>
    // View button (typed code)
    document.getElementById("codeForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const raw = document.getElementById("codeInput").value || "";
      const token = raw.trim().replace(/\s+/g, "").toUpperCase();
      if (!token) return;
      window.location.href = "/l/" + token;
    });

    // Scan QR button
    // (If your scanner logic is already working, keep it.
    // For now this fallback tells people to use phone camera if needed.)
    const scanBtn = document.getElementById("scanBtn");
    if (scanBtn) {
      scanBtn.addEventListener("click", () => {
        alert("Use your phone camera to scan the FlameTag QR.");
      });
    }
  </script>

{% endblock %}
