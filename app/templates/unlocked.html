{% extends "base.html" %}
{% block content %}

<div class="page">
  <div class="page-header">
    <div class="badge">Owner view • <span class="code">{{ lighter.token }}</span></div>
    <h1 class="page-title" style="margin-top:14px;">Private message</h1>
    <p class="page-subtitle">Only visible after entering the correct PIN.</p>
  </div>

  <!-- Private owner message -->
  <div class="panel">
    <div class="panel-title">Owner-only message</div>

    <div class="big-message" style="white-space: pre-wrap;">
      {{ lighter.private_message }}
    </div>

    <div class="btn-row" style="margin-top:16px;">
      <a class="btn secondary small"
         href="{{ url_for('main.lighter_page', token=lighter.token) }}"
         style="text-align:center; line-height: 40px; text-decoration:none;">
        Back
      </a>
      <a class="btn secondary small"
         href="{{ url_for('main.home') }}"
         style="text-align:center; line-height: 40px; text-decoration:none;">
        Home
      </a>
    </div>
  </div>

<!-- Found notes timeline -->
<div class="panel" style="margin-top:14px;">
  <div class="panel-title">Finder notes</div>

  {% if found_notes and found_notes|length > 0 %}

    <div class="chat-stack">
      {% for n in found_notes %}
        <div class="chat-bubble">
          <div class="chat-text">
            {{ n.note }}
          </div>
          <div class="chat-time">
            {{ n.created_at.strftime('%d %b %Y · %H:%M') }}
          </div>
        </div>
      {% endfor %}
    </div>

  {% else %}

    <div class="big-message" style="opacity:0.85;">
      No one has left a note yet.
    </div>

    <div class="small-note" style="margin-top:8px;">
      When someone finds this lighter and submits a note, it will appear here.
    </div>

  {% endif %}
</div>

{% endblock %}
